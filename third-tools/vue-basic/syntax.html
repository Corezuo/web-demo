<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Vueè¯­æ³•ç»ƒä¹ </title>
    <style type="text/css">
        .one {
            color: red;
        }
        .two {
            color: blue;
        }
    </style>
</head>

<body>
    <div id="app">
        <h3>{{ message }}</h3>
        <!-- è¿‡æ»¤å™¨ -->
        <h3>filterï¼š{{ message | capitalize | capitalize2}}</h3>
        <!-- åŸç”Ÿhtml -->
        <p v-html="rawHtml"></p>
        <!-- if æŒ‡ä»¤ -->
        <p v-if="seen">ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†</p>
        <p v-else>Oh no ğŸ˜¢</p>
        <!-- åˆ—è¡¨æ¸²æŸ“ -->
        <ol>
            <li v-for="(todo, index) in todos">
                key-{{index}} value-{{ todo.text }}
            </li>
        </ol>
        <div v-for="(value, name, index) in userInfo">
            {{ index }}. {{ name }}: {{ value }}
        </div>
        <!-- äº‹ä»¶ -->
        <button v-on:click="doActive">ç‚¹å‡»æˆ‘</button>
        <button @click="doActive">ç‚¹å‡»æˆ‘ï¼ˆç¼©å†™ï¼‰</button>
        <!-- åŠ¨æ€å‚æ•°ï¼Œå½“ eventName çš„å€¼ä¸º "focus" æ—¶ï¼Œv-on:[eventName] å°†ç­‰ä»·äº v-on:focus -->
        <!-- TODO: eventName å¤§å°å†™ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ -->
        <p>
            <a v-on:[eventname]="doFocus" href="#">èšç„¦</a>
        </p>
        <!-- è¡¨å•åŒå‘ç»‘å®š -->
        <div>
            åŒå‘ç»‘å®šï¼š<input v-model="message" />
        </div>
        <div>
            ç­‰ä»·äºï¼š<input v-bind:value="message"  v-on:input="message = $event.target.value" />
        </div>
        <p>ä½ è¾“å…¥çš„æ˜¯ï¼š{{message}}</p>
        <!-- è¡¨è¾¾å¼ -->
        <p>number {{ number + 1 == 2 ? 3 : 4 }}</p>

        <!-- v-bindæŒ‡ä»¤ -->
        <button v-bind:disabled="seen">Button</button>
        <a v-bind:href="url">ç™¾åº¦ä¸€ä¸‹</a>
        <span v-bind:title="message">
            é¼ æ ‡æ‚¬åœå‡ ç§’é’ŸæŸ¥çœ‹æ­¤å¤„åŠ¨æ€ç»‘å®šçš„æç¤ºä¿¡æ¯ï¼
        </span>

        <!-- è®¡ç®—å±æ€§ -->
        <h2>è®¡ç®—å±æ€§ï¼š {{ computedMessage }}, now = {{ now }}</h2>
        <!-- æ–¹æ³• -->
        <p>æ–¹æ³•è¿”å›å€¼ï¼š{{ reversedMessage() }}</p>
        <!-- ä¾¦å¬å±æ€§ -->
        <h2>ç›‘å¬å±æ€§ï¼š{{ firstname }}</h2>
        <!-- classç»‘å®š -->
        <div v-bind:class="{one: isActive}">classç»‘å®š</div>
        <!-- styleç»‘å®š -->
        <div v-bind:style="{ color: activeColor, fontSize: fontSize + 'px' }">styleç»‘å®š</div>

        <!-- ä½¿ç”¨ç»„ä»¶ -->
        <button-counter></button-counter>
        <!-- ç»„ä»¶ä¼ å‚ï¼Œå¤§å°å†™ä¸æ•æ„Ÿçš„ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¼šæŠŠæ‰€æœ‰å¤§å†™å­—ç¬¦è§£é‡Šä¸ºå°å†™å­—ç¬¦ã€‚è¿™æ„å‘³ç€å½“ä½ ä½¿ç”¨ DOM ä¸­çš„æ¨¡æ¿æ—¶ï¼Œ
            camelCase (é©¼å³°å‘½åæ³•) çš„ prop åéœ€è¦ä½¿ç”¨å…¶ç­‰ä»·çš„ kebab-case (çŸ­æ¨ªçº¿åˆ†éš”å‘½å) å‘½å-->
        <!-- é™æ€èµ‹å€¼ -->
        <p>--- é™æ€èµ‹å€¼ --- </p>
        <blog-post post-title="My journey with Vue"></blog-post>
        <blog-post post-title="Blogging with Vue"></blog-post>
        <blog-post post-title="Why Vue is so fun"></blog-post>

        <!-- çˆ¶ç»„ä»¶ä¼ å€¼ -->
        <p>--- çˆ¶ç»„ä»¶ä¼ å€¼ --- </p>
        <blog-post
            v-for="item in orderList"
            v-bind:key="item.id"
            v-bind:post-title="item.title"
            v-bind:time="item.time"
        ></blog-post>

        <p>--- çˆ¶ç»„ä»¶ä¼ å€¼ï¼ˆé‡æ„ï¼‰ï¼ŒTODO: key ä¸èƒ½é‡å¤ï¼Œå†…éƒ¨å±æ€§ --- </p>
        <blog-post-user
            v-for="user in userList"
            v-bind:key="user.id"
            v-bind:user="user"
        ></blog-post-user>

        <!-- å±€éƒ¨ç»„ä»¶ -->
        <title-dazuo 
            v-on:enlarge-text="onEnlargeText"
        ></title-dazuo>

        <p>--- ç»„ä»¶ä¸Šä½¿ç”¨model --- </p>
        <custom-input v-model="searchText"></custom-input>
        <!-- ç­‰ä»·äºï¼š -->
        <!-- <custom-input
            v-bind:value="searchText"
            v-on:input="searchText = $event"
        ></custom-input> -->
        <p>ä½ è¾“å…¥çš„æ˜¯ï¼š{{ searchText }}</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
        // Vueç‰ˆæœ¬å·
        console.log("vue version: ", Number(Vue.version.split('.')[0]));

        // å…¨å±€æ³¨å†Œç»„ä»¶
        Vue.component('button-counter', {
            data: function () {
                return {
                    count: 1
                }
            },
            template: '<h2>button-counter {{ count }}</h2>'
        });

        Vue.component('blog-post', {
            // propsç”¨äºæ¥æ”¶æ¥è‡ªçˆ¶ç»„ä»¶çš„æ•°æ®
            props: {
                // æŒ‡å®šå€¼çš„ç±»å‹ï¼šStringã€ Numberã€Booleanã€Arrayã€Objectã€Functionã€Promise or any other constructor
                postTitle: String,
                // å‚æ•°éªŒè¯
                time: {
                    type: String,
                    default: 'a',
                    required: false,
                    validator: function (value) {
                        console.log(value);
                        return true;
                    }
                }
            },
            template: '<div><h3>postTitle: {{ postTitle }} time: {{time}}</h3></div>'
        });

        Vue.component('blog-post-user', {
            props: {
                user: Object,
            },
            // å­ç»„ä»¶å¯ä»¥é€šè¿‡è°ƒç”¨å†…å»ºçš„ $emit æ–¹æ³• å¹¶ä¼ å…¥äº‹ä»¶åç§°æ¥è§¦å‘ä¸€ä¸ªäº‹ä»¶
            template: `
                    <div>
                        <h3>{{ user.name }}</h3>
                    </div>
                    `
        });

        // å…¨å±€è¿‡æ»¤å™¨
        Vue.filter('capitalize', function (value) {
            return "filter-" + value;            
        });

        var vm = new Vue({
            // æŒ‚è½½çš„ç›®æ ‡
            el: '#app',
            /// ä¸€ä¸ªå­—ç¬¦ä¸²æ¨¡æ¿ä½œä¸º Vue å®ä¾‹çš„æ ‡è¯†ä½¿ç”¨ã€‚æ¨¡æ¿å°†ä¼š æ›¿æ¢ æŒ‚è½½çš„å…ƒç´ ã€‚æŒ‚è½½å…ƒç´ çš„å†…å®¹éƒ½å°†è¢«å¿½ç•¥ï¼Œé™¤éæ¨¡æ¿çš„å†…å®¹æœ‰åˆ†å‘æ’æ§½ã€‚
            // template: '<h1>target</h1>',
            /// æ¸²æŸ“å‡½æ•°
            // render: function (createElement) {
            //     createElement();
            // },

            // å½“ä¸€ä¸ªç»„ä»¶è¢«å®šä¹‰ï¼Œdata å¿…é¡»å£°æ˜ä¸ºè¿”å›ä¸€ä¸ªåˆå§‹æ•°æ®å¯¹è±¡çš„å‡½æ•°ï¼Œå› ä¸ºç»„ä»¶å¯èƒ½è¢«ç”¨æ¥åˆ›å»ºå¤šä¸ªå®ä¾‹ã€‚
            // å¦‚æœ data ä»ç„¶æ˜¯ä¸€ä¸ªçº¯ç²¹çš„å¯¹è±¡ï¼Œåˆ™æ‰€æœ‰çš„å®ä¾‹å°†å…±äº«å¼•ç”¨åŒä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼é€šè¿‡æä¾› data å‡½æ•°ï¼Œ
            // æ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹åï¼Œæˆ‘ä»¬èƒ½å¤Ÿè°ƒç”¨ data å‡½æ•°ï¼Œä»è€Œè¿”å›åˆå§‹æ•°æ®çš„ä¸€ä¸ªå…¨æ–°å‰¯æœ¬æ•°æ®å¯¹è±¡ã€‚
            data: {
                message: 'Hello Vue!',
                seen: false,
                rawHtml: '<h1>hello rawHtml</h1>',
                number: 1,
                url: "https://www.baidu.com",
                eventname: "focus",
                firstname: "1",
                isActive: true,
                activeColor: "red",
                fontSize: 30,
                searchText: "searchText2342342",
                todos: [
                    {
                        text: 'å­¦ä¹  JavaScript' 
                    },
                    { 
                        text: 'å­¦ä¹  Vue' 
                    }
                ],
                userInfo: {
                    title: 'How to do lists in Vue',
                    author: 'Jane Doe',
                    publishedAt: '2016-04-10'
                },
                orderList: [
                    {
                        id: 1, 
                        title: 'My journey',
                        time: "2019-08-28"
                    },
                    {
                        id: 2, 
                        title: 'Blogging',
                        time: "2019-08-29"
                    }
                ],
                userList: [
                    {
                        id: 3, 
                        name: 'My journey',
                        age: 20
                    },
                    {
                        id: 4, 
                        name: 'Blogging',
                        time: 23
                    }
                ]
            },
            // ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œåœ¨å®ä¾‹åˆ›å»ºå®Œæˆåè¢«ç«‹å³è°ƒç”¨ã€‚
            created: function (){
                // `this` æŒ‡å‘ vm å®ä¾‹
                console.log("vue created ... url =", this.url);
                console.log("vue this: ", this);
            },
            methods: {
                doActive: function (){
                    this.url = "https://www.imooc.com";
                    // this.message = "hello dazuo";
                    this.firstname = "dazuo";
                },
                doFocus: function () {
                    console.log("æˆ‘å¾—äº†ç„¦ç‚¹");
                },
                reversedMessage: function () {
                    return "hello reversedMessage";
                },
                onEnlargeText: function () {
                    console.log("hello onEnlargeText");
                }
            },
            // è®¡ç®—å±æ€§
            computed: {
                // æ¨¡æ¿å†…çš„è¡¨è¾¾å¼éå¸¸ä¾¿åˆ©ï¼Œä½†æ˜¯è®¾è®¡å®ƒä»¬çš„åˆè¡·æ˜¯ç”¨äºç®€å•è¿ç®—çš„ã€‚åœ¨æ¨¡æ¿ä¸­æ”¾å…¥å¤ªå¤šçš„é€»è¾‘ä¼šè®©æ¨¡æ¿è¿‡é‡ä¸”éš¾ä»¥ç»´æŠ¤ã€‚
                computedMessage: function () {
                    return this.message.toUpperCase();
                },
                now: function () {
                    return Date.now();
                }
            },
            watch: {
                // ç›‘å¬firstname å±æ€§å˜åŒ–ï¼Œè§¦å‘
                firstname: function (newVal, oldVal) {
                    console.log("newVal: ", newVal, " oldVal: ", oldVal);
                    this.message = newVal + "dazuo";
                }
            },
            // å®šä¹‰å±€éƒ¨ç»„ä»¶
            components: {
                "title-dazuo": {
                    template: `
                        <div>
                            <h3>å±€éƒ¨ç»„ä»¶ï¼Œhello dazuo</h3>
                            <button v-on:click="$emit('enlarge-text')">å­ç»„ä»¶äº‹ä»¶</button>
                        </div>
                    `
                },
                "custom-input": {
                    props: ['value'],
                    // template: '<h2>{{value}}</h2>'
                    // TODO: ä¸æ”¯æŒå…±å­˜ï¼Ÿï¼Ÿ
                    template: `
                        <input
                            v-bind:value="value"
                            v-on:input="$emit('input', $event.target.value)"
                        >
                    `
                }
            },
            // å±€éƒ¨è¿‡æ»¤å™¨
            filters: {
                "capitalize2": function (value) {
                    return "filter2-" + value;
                }
            }
        });

        // é™¤äº†æ•°æ®å±æ€§ï¼ŒVue å®ä¾‹è¿˜æš´éœ²äº†ä¸€äº›æœ‰ç”¨çš„å®ä¾‹å±æ€§ä¸æ–¹æ³•ã€‚å®ƒä»¬éƒ½æœ‰å‰ç¼€ $ï¼Œä»¥ä¾¿ä¸ç”¨æˆ·å®šä¹‰çš„å±æ€§åŒºåˆ†å¼€æ¥
        console.log("vm data: ", vm.data);
        // vm.$el === document.getElementById('example') // => true
        // $watch æ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•
        // vm.$watch('a', function (newValue, oldValue) {
        // // è¿™ä¸ªå›è°ƒå°†åœ¨ `vm.a` æ”¹å˜åè°ƒç”¨
        // })
    </script>
</body>
</html>